{"title":"¿Cuántos laboratorios de ensayo acreditados por el INN hay en Chile? Versión 2023","markdown":{"yaml":{"title":"¿Cuántos laboratorios de ensayo acreditados por el INN hay en Chile? Versión 2023","date":"2023-07-03","summary":"Este post muestra el **paso a paso** del análisis estadístico en R, sobre los laboratorios de ensayos acreditados hasta julio de 2023","lastmod":"2023-07-03T11:16:37-04:00"},"headingText":"¿Dónde están los datos de laboratorios acreditados por el INN?","containsRefs":false,"markdown":"\n\n```{r include=FALSE}\nknitr::opts_chunk$set(comment = NA)\n```\n\nHace ya casi 2 años publiqué un [post](https://www.linkedin.com/posts/cjgomezs_acreditados-activity-6856380114675011584-7hnO?utm_source=share&utm_medium=member_desktop) acerca de cuántos laboratorios de ensayos acreditados existían en Chile el 2021. La publicación generó airadas reacciones, sin embargo, se abrió un interesante debate (esa es la idea).\n\nEs tiempo de actualizar ese análisis con los datos de 2023. En esta oportunidad llevaremos a cabo el \nanálisis paso a paso en `R` bajo el concepto de [*Reproducible Research*](https://esajournals.onlinelibrary.wiley.com/doi/10.1002/bes2.1801)\n\n**Nota: Considerar que algunas razones sociales podrían tener varios laboratorios/alcances\nacreditados, por lo tanto, este gráfico en realidad cuenta el número de acreditaciones.\n(¿Clickbait?)**\n\nLa versión de este post es *semi-automática*, es decir, algunas operaciones serán \nhechas *a mano*. Podríamos aplicar *web scraping* y bajar los datos directamente desde la página web del INN, pero eso qudará para otro post (lo intuye bien querid@ lector@... cuando yo aprenda a hacerlo.)\n\n\nBueno, lo primero es dirigirnos al siguiente link para bajar los datos desde la\npágina del INN (son datos públicos por si acaso):\n\n[Directorio de Acreditados](https://acreditacion.innonline.cl/)\n\n![](acreditados.png)\n\nEn el campo *Tipo de ESquema de Acreditación* seleccionamos *Laboratorios de ensayo*:\n\n\n![](acreditados2.png)\n\nPresionamos *Buscar* y obtenderemos el listado completo (incluyendo los laboratorios suspendidos):\n\n![](acreditados3.png)\n\nLamentablemente, el sitio no tiene ninguna opción para bajar los datos en Excel u\notro formato, así que tendremos que hacerlo a la antigua:\n\n1. Botón derecho y se abrirá el siguiente menú:\n\n![](acreditados4.png)\n\n\n2. Elija *Guardar Como* y en tipo seleccione *Página web (completa)* y guárdelo\ncon el nombre *acreditados.html* (el nombre da igual)\n\n![](acreditados5.png)\n\nListo, hemos bajado los datos y ahora debemos *limpiarlos* ya que incluso se \ndescargaron los íconos de los certificado en pdf. Tenemos que dejar la tabla \nlimpia para el análisis en `R` (o para cualquier otro software)\n\n## Limpieza de la base de datos en Excel\n\nHaremos la limpieza de datos en Excel. \n\n1. Abra Excel \n2. Ahora abra el archivo archivados.html que guardó (sí, Excel puede abrir este tipo de archivos) y obtendrá algo similar a esto:\n\n![](acreditados6.png)\n\nEl objetivo es llegar a una hoja de Excel plana:\n\n![](acreditados7.png)\n\n3. Seleccionemos todos los datos inlcuyendo los encabezados de las columnas \n(N, N Certi, etc), copiar y pegar en una **nueva hoja** sólo como datos, es decir,\nnos ubicamos en la celda A1 de la hoja nueva, presionamos botón derecho y seleccionamos\n`Valores (V)`:\n\n![](index.es_insertimage_2.png)\n\nY obtendremos lo siguiente:\n\n![](index.es_insertimage_3.png)\n\n4. Eliminamos la columna B:\n\n![](index.es_insertimage_4.png)\n\n5. Hemos obtenido la tabla que buscábamos:\n\n![](index.es_insertimage_5.png)\n\n6. Lo único que nos falta es modificar un poco los encabezados para eliminar\nacentos, espacios en blanco, etc. Para que Ud. pueda reproducir este análisis\ncambie los encabezados por los siguientes:\n\n![](index.es_insertimage_6.png)\n\n7. ¡Listo! hemos *limpiado* la base de datos, la cual debe lucir más o menos así \nen el Excel:\n\n![](index.es_insertimage_7.png)\n\n8. Cambiemos el nombre la hoja a `datos`:\n\n![](index.es_insertimage_8.png)\n\n9. Por último guardar el libro Excel con el nombre `acreditados.xlsx`\n\n\n## Análisis estadístico en `R`\n\nAbrimos el software RStudio y generamos un nuevo script:\n\n![](index.es_insertimage_9.png)\n\nGuardamos el script con el nombre `acreditados.R` en el **mismo directorio**\nque guardamos la base de datos limpia `acreditados.xlsx`\n\nLos siguientes comandos importan la base de datos del INN desde el Excel hasta `R`:\n\n```{r, echo = T}\nlibrary(readxl)\nacreditados <- read_excel('acreditados.xlsx', sheet = 'datos')\n\n```\n\nLa importación ha sido exitosa si observa la siguiente tabla con el comando `head()`\n\n```{r}\nhead(acreditados)\n```\n\nAhora haremos el gráfico de barras el cual indica el número de laboratorios de \nensayo acreditados por el INN al 03 de julio de 2023 clasificados por `Area`.\nPor una cuestión de espacios sólo se muestran aquellas áreas con más de 10 laboratorios acreditados:\n\n\n```{r, message = F, warning=F, fig.width=12, fig.height=7}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(ggplot2)\nlibrary(magrittr)\n\nacreditados <- read_excel('acreditados.xlsx', sheet = 'datos')\n\ntabla <- acreditados %>% \n  group_by(Area) %>% \n  summarise(n = n())\n\n# Número de acreditaciones suspendidas\nn.suspendidos <- acreditados %>% \n  filter(!is.na(Observaciones)) %>% \n  count()\n\n# Número de acreditaciones totales (incluyendo las suspendidas)\nn.total <- acreditados %>% \n  count()\n\n\nggplot(tabla %>% filter(n >= 10), aes(x = reorder(Area, n), y = n, label = n)) +\n  geom_bar(stat = \"identity\", fill = 'blue', alpha = 0.7) +\n  ylab('N° de laboratorios de ensayo') +\n  xlab('Área') +\n  labs(title = paste('Acreditaciones en Chile por INN bajo ISO 17025 por área N =', \n                     n.total),\n       subtitle = paste(\"Incluye \", n.suspendidos, \"suspendidos. Sólo se muestran n > 10\"),\n       caption = \"Fuente: https://acreditacion.innonline.cl/\") +\n  theme_bw() +\n  geom_text(size=5,hjust=1.5, col = 'white') +\n  coord_flip()\n\n```\n\n\n¡Listo!\nEn un siguiente paso podríamos desagregar por *Organización*, de tal manera de \natribuir las acreditaciones clasificando por razón social ¿Le parece estimad@ lector@?\n\nSaludos\n\n\n\n\n","srcMarkdownNoYaml":"\n\n```{r include=FALSE}\nknitr::opts_chunk$set(comment = NA)\n```\n\nHace ya casi 2 años publiqué un [post](https://www.linkedin.com/posts/cjgomezs_acreditados-activity-6856380114675011584-7hnO?utm_source=share&utm_medium=member_desktop) acerca de cuántos laboratorios de ensayos acreditados existían en Chile el 2021. La publicación generó airadas reacciones, sin embargo, se abrió un interesante debate (esa es la idea).\n\nEs tiempo de actualizar ese análisis con los datos de 2023. En esta oportunidad llevaremos a cabo el \nanálisis paso a paso en `R` bajo el concepto de [*Reproducible Research*](https://esajournals.onlinelibrary.wiley.com/doi/10.1002/bes2.1801)\n\n**Nota: Considerar que algunas razones sociales podrían tener varios laboratorios/alcances\nacreditados, por lo tanto, este gráfico en realidad cuenta el número de acreditaciones.\n(¿Clickbait?)**\n\nLa versión de este post es *semi-automática*, es decir, algunas operaciones serán \nhechas *a mano*. Podríamos aplicar *web scraping* y bajar los datos directamente desde la página web del INN, pero eso qudará para otro post (lo intuye bien querid@ lector@... cuando yo aprenda a hacerlo.)\n\n## ¿Dónde están los datos de laboratorios acreditados por el INN?\n\nBueno, lo primero es dirigirnos al siguiente link para bajar los datos desde la\npágina del INN (son datos públicos por si acaso):\n\n[Directorio de Acreditados](https://acreditacion.innonline.cl/)\n\n![](acreditados.png)\n\nEn el campo *Tipo de ESquema de Acreditación* seleccionamos *Laboratorios de ensayo*:\n\n\n![](acreditados2.png)\n\nPresionamos *Buscar* y obtenderemos el listado completo (incluyendo los laboratorios suspendidos):\n\n![](acreditados3.png)\n\nLamentablemente, el sitio no tiene ninguna opción para bajar los datos en Excel u\notro formato, así que tendremos que hacerlo a la antigua:\n\n1. Botón derecho y se abrirá el siguiente menú:\n\n![](acreditados4.png)\n\n\n2. Elija *Guardar Como* y en tipo seleccione *Página web (completa)* y guárdelo\ncon el nombre *acreditados.html* (el nombre da igual)\n\n![](acreditados5.png)\n\nListo, hemos bajado los datos y ahora debemos *limpiarlos* ya que incluso se \ndescargaron los íconos de los certificado en pdf. Tenemos que dejar la tabla \nlimpia para el análisis en `R` (o para cualquier otro software)\n\n## Limpieza de la base de datos en Excel\n\nHaremos la limpieza de datos en Excel. \n\n1. Abra Excel \n2. Ahora abra el archivo archivados.html que guardó (sí, Excel puede abrir este tipo de archivos) y obtendrá algo similar a esto:\n\n![](acreditados6.png)\n\nEl objetivo es llegar a una hoja de Excel plana:\n\n![](acreditados7.png)\n\n3. Seleccionemos todos los datos inlcuyendo los encabezados de las columnas \n(N, N Certi, etc), copiar y pegar en una **nueva hoja** sólo como datos, es decir,\nnos ubicamos en la celda A1 de la hoja nueva, presionamos botón derecho y seleccionamos\n`Valores (V)`:\n\n![](index.es_insertimage_2.png)\n\nY obtendremos lo siguiente:\n\n![](index.es_insertimage_3.png)\n\n4. Eliminamos la columna B:\n\n![](index.es_insertimage_4.png)\n\n5. Hemos obtenido la tabla que buscábamos:\n\n![](index.es_insertimage_5.png)\n\n6. Lo único que nos falta es modificar un poco los encabezados para eliminar\nacentos, espacios en blanco, etc. Para que Ud. pueda reproducir este análisis\ncambie los encabezados por los siguientes:\n\n![](index.es_insertimage_6.png)\n\n7. ¡Listo! hemos *limpiado* la base de datos, la cual debe lucir más o menos así \nen el Excel:\n\n![](index.es_insertimage_7.png)\n\n8. Cambiemos el nombre la hoja a `datos`:\n\n![](index.es_insertimage_8.png)\n\n9. Por último guardar el libro Excel con el nombre `acreditados.xlsx`\n\n\n## Análisis estadístico en `R`\n\nAbrimos el software RStudio y generamos un nuevo script:\n\n![](index.es_insertimage_9.png)\n\nGuardamos el script con el nombre `acreditados.R` en el **mismo directorio**\nque guardamos la base de datos limpia `acreditados.xlsx`\n\nLos siguientes comandos importan la base de datos del INN desde el Excel hasta `R`:\n\n```{r, echo = T}\nlibrary(readxl)\nacreditados <- read_excel('acreditados.xlsx', sheet = 'datos')\n\n```\n\nLa importación ha sido exitosa si observa la siguiente tabla con el comando `head()`\n\n```{r}\nhead(acreditados)\n```\n\nAhora haremos el gráfico de barras el cual indica el número de laboratorios de \nensayo acreditados por el INN al 03 de julio de 2023 clasificados por `Area`.\nPor una cuestión de espacios sólo se muestran aquellas áreas con más de 10 laboratorios acreditados:\n\n\n```{r, message = F, warning=F, fig.width=12, fig.height=7}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(ggplot2)\nlibrary(magrittr)\n\nacreditados <- read_excel('acreditados.xlsx', sheet = 'datos')\n\ntabla <- acreditados %>% \n  group_by(Area) %>% \n  summarise(n = n())\n\n# Número de acreditaciones suspendidas\nn.suspendidos <- acreditados %>% \n  filter(!is.na(Observaciones)) %>% \n  count()\n\n# Número de acreditaciones totales (incluyendo las suspendidas)\nn.total <- acreditados %>% \n  count()\n\n\nggplot(tabla %>% filter(n >= 10), aes(x = reorder(Area, n), y = n, label = n)) +\n  geom_bar(stat = \"identity\", fill = 'blue', alpha = 0.7) +\n  ylab('N° de laboratorios de ensayo') +\n  xlab('Área') +\n  labs(title = paste('Acreditaciones en Chile por INN bajo ISO 17025 por área N =', \n                     n.total),\n       subtitle = paste(\"Incluye \", n.suspendidos, \"suspendidos. Sólo se muestran n > 10\"),\n       caption = \"Fuente: https://acreditacion.innonline.cl/\") +\n  theme_bw() +\n  geom_text(size=5,hjust=1.5, col = 'white') +\n  coord_flip()\n\n```\n\n\n¡Listo!\nEn un siguiente paso podríamos desagregar por *Organización*, de tal manera de \natribuir las acreditaciones clasificando por razón social ¿Le parece estimad@ lector@?\n\nSaludos\n\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css","../../custom.css"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.433","theme":"uniited","knitr":{"opts_chunk":{"warning":false,"message":false}},"title":"¿Cuántos laboratorios de ensayo acreditados por el INN hay en Chile? Versión 2023","date":"2023-07-03","summary":"Este post muestra el **paso a paso** del análisis estadístico en R, sobre los laboratorios de ensayos acreditados hasta julio de 2023","lastmod":"2023-07-03T11:16:37-04:00"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}